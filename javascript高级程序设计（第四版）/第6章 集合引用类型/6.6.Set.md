# Set

- Set 是 ECMAScript6 的新增特性，是一种新的**集合类型**，其在很多方面像是加强的 Map

<a href="" target="_blank">相关代码 →</a>

## 基本 API

- 使用**new 关键字**和**Set 构造函数**可以创建一个空集合

```js
const s = new Set()
console.log(s) // Set(0) {}
```

- 可以给 Set 构造函数**传入一个可迭代对象**，需要包含**插入到新集合实例中的元素**

```js
// 使用数组初始化集合
const s1 = new Set(['val1', 'val2', 'val3'])
console.log(s1) // Set(3) { 'val1', 'val2', 'val3' }

// 自定义迭代器初始化集合
const s2 = new Set({
  [Symbol.iterator]: function* () {
    yield 'val1'
    yield 'val2'
    yield 'val3'
  },
})
console.log(s2) // Set(3) { 'val1', 'val2', 'val3' }
```

- 初始化后，可以使用`add()`添加值，使用`has()`进行查询，通过`size`属性获取元素数量，使用`delete()`和`clear()`删除元素

```js
const s3 = new Set()
console.log(s3.size) // 0

s3.add('Matt').add('Frisbie')
console.log(s3.has('Matt')) // true
console.log(s3.size) // 2

s3.delete('Matt') // 删除这个值
console.log(s3.has('Matt')) // false
console.log(s3.has('Frisbie')) // true
console.log(s3.size) // 1

s3.clear() // 清除所有值
console.log(s3.has('Matt')) // false
console.log(s3.has('Frisbie')) // false
console.log(s3.size) // 0
```

- `add()`方法返回集合实例，因此可以把多个操作连缀起来，从初始化到添加值：

```js
const s4 = new Set().add('val1').add('val2')
console.log(s4) // Set(2) { 'val1', 'val2' }
```

- 与`Map`类似，可以以**任意 JS 数据类型**作为集合的**值**

```js
const s5 = new Set()

const functionVal = function () {}
const symbolVal = Symbol()
const objectVal = new Object()

s5.add(functionVal).add(symbolVal).add(objectVal)
console.log(s5) // Set(3) { [Function: functionVal], Symbol(), {} }

console.log(s5.has(functionVal)) // true
console.log(s5.has(symbolVal)) // true
console.log(s5.has(objectVal)) // true
```

- 与`Object`和`Map`一样，若元素是对象或其他“集合类型”，当元素的内容或属性被修改时，集合也受到影响

```js
const s6 = new Set()

const objVal = {},
  arrVal = []

s6.add(objVal).add(arrVal)
console.log(s6) // Set(2) { {}, [] }

objVal.bar = 'bar'
arrVal.push('bar')
console.log(s6) // Set(2) { { bar: 'bar' }, [ 'bar' ] }
console.log(s6.has(objVal)) // true
console.log(s6.has(arrVal)) // true
```

- `delete()`方法返回布尔值，表示集合中是否存在要删除的值

```js
const s7 = new Set()
s7.add('foo').add('bar')
console.log(s7.delete('foo')) // true
console.log(s7.delete('bar')) // true
console.log(s7) // Set(0) {}
```

## 顺序与迭代

## 定义正式集合操作

## 总结 & 问点

- Set 属于什么类型？如何创建 Set 类型？初始化后可以对其进行哪些操作？
- Set 可以使用哪些数据类型作为元素？若元素是对象，当其内容或属性被修改时，集合受到影响么？
